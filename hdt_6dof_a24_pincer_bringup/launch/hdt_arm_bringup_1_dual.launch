<?xml version="1.0"?>
<launch>
  <arg name="debug" default="false" />
  <arg name="fake_execution" default="true" />
  <arg name="simulation" default="$(arg fake_execution)" />
  <arg name="controller_type" default="xbox" />
  
  <!-- rqt console for filtering ROS logging messages by node
  <node name="rqt_console" pkg="rqt_console" type="rqt_console"/>
  -->
     

  <!-- load robot description -->
  <param name="robot_description"
    command="$(find xacro)/xacro.py '$(find hdt_6dof_a24_pincer_description)/urdf/hdt_arm_dual.xacro'" />

  <!-- load the hardware configuration -->
  <rosparam command="load" file="$(find hdt_6dof_a24_pincer_description)/config/hardware_dual.yaml" />
  
  <!-- load the controller configuration -->
  <rosparam command="load" file="$(find hdt_6dof_a24_pincer_description)/config/controllers_dual.yaml" />
  

    <!-- load the serial nodes 
    <node name="serial_node" pkg="rosserial_python" type="serial_node.py" respawn="true" output="screen" args="tcp 11411" unless="$(arg simulation)"/>
    <node name="rosserial_message_info" pkg="rosserial_python" type="message_info_service.py" unless="$(arg simulation)"/>
-->

  <!-- load the hardware interface -->
  <node name="adroit_control" pkg="hdt_adroit_control" type="adroit_control" respawn="false" output="screen">
    <param name="robot_name" value="hdt_arm" /> 
    <param name="fake_execution" value="$(arg simulation)" /> 
  </node>

  <!-- load and start controllers for trajectory control-->
  <node name="controller_manager_spawn" pkg="controller_manager" type="controller_manager" respawn="false" output="screen" args="spawn 
  /hdt_arm/joint_state_controller 
  /hdt_arm/left_arm_controller
  /hdt_arm/right_arm_controller" />
  
  <!-- load but do not start controllers for joint by joint control-->
  <node name="controller_manager_load" pkg="controller_manager" type="controller_manager" respawn="false" output="screen" args="load 
  /hdt_arm/leftjoint1_position_controller 
  /hdt_arm/leftjoint2_position_controller 
  /hdt_arm/leftjoint3_position_controller 
  /hdt_arm/leftjoint4_position_controller 
  /hdt_arm/leftjoint5_position_controller 
  /hdt_arm/leftjoint6_position_controller 
  /hdt_arm/leftpincer_joint_position_controller 
  /hdt_arm/leftjoint1_velocity_controller 
  /hdt_arm/leftjoint2_velocity_controller 
  /hdt_arm/leftjoint3_velocity_controller 
  /hdt_arm/leftjoint4_velocity_controller 
  /hdt_arm/leftjoint5_velocity_controller 
  /hdt_arm/leftjoint6_velocity_controller 
  /hdt_arm/leftpincer_joint_velocity_controller
  /hdt_arm/rightjoint1_position_controller 
  /hdt_arm/rightjoint2_position_controller 
  /hdt_arm/rightjoint3_position_controller 
  /hdt_arm/rightjoint4_position_controller 
  /hdt_arm/rightjoint5_position_controller 
  /hdt_arm/rightjoint6_position_controller 
  /hdt_arm/rightpincer_joint_position_controller 
  /hdt_arm/rightjoint1_velocity_controller 
  /hdt_arm/rightjoint2_velocity_controller 
  /hdt_arm/rightjoint3_velocity_controller 
  /hdt_arm/rightjoint4_velocity_controller 
  /hdt_arm/rightjoint5_velocity_controller 
  /hdt_arm/rightjoint6_velocity_controller 
  /hdt_arm/rightpincer_joint_velocity_controller" />

  <!-- shell script to wait for /joint_states topic -->
  <node name="delay_script" pkg="hdt_6dof_a24_pincer_bringup" type="delay_script_dual.sh" args="$(arg controller_type)" output="screen"/>
</launch>
